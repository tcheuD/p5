{% extends "layout.html.twig" %}
{% block body %}
{% if session.get('id') %}
{% if post.user.id == session.get('id') or session.isAdmin() %}

        <a href="/p5/blog/editPost/{{ id }}" class="button alt">Modifier</a>
    <button src="/p5/blog/deletePost/{{ id }}" class="button alt delete" value="{{ session.get('token') }}">Supprimer</button>

{% endif %}
{% endif %}
    <article class="box post">

    <h2>
        {{ post.title }}
        <h4>
            par : {{ post.user.nickname }}
        </h4>
    </h2>

{{ post.content }}

    </article>
    {% if session.get('id') %}
<form action="/p5/blog/post/{{ id }}" method="post">
    <p>
        <label>Ecrire un commentaire :</label><br>
        <textarea name="comment" rows="3" cols="50"></textarea><br/>

        <input type="submit" value="envoyer"/>
    </p>
</form>
        {% else %}
        <strong>Vous devez être connecté pour pouvoir écrire un commentaire</strong>
        <h4>
            <a href="/p5/login">Connexion</a>
            <a href="/p5/registration">Inscription</a>
        </h4>
    {% endif %}
{% for com in coms %}
{% if session.get('id') %}
{% if com.user.id == session.get('id') or session.isAdmin() %}
    <a href="/p5/blog/editComment/{{ com.id }}" class="button alt">Modifier</a>
    <button src="/p5/blog/deleteComment/{{ com.id }}" class="button alt delete" value="{{ session.get('token') }}">Supprimer</button>

{% endif %}
{% endif %}
    <article class="box post">
        <h4>{{ com.user.nickname }}</h4> {{ com.comment }}
    </article>
{% endfor %}
{% endblock %}